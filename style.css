/* style.css の全体 */

html, body {
    height: 100%; 
    margin: 0;
}

body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    display: flex;
    flex-direction: column;
    align-items: center;
    background-color: #111;
    color: #fff;
    padding: 10px;
    /* 盤面全体を少し下に移動させるため、padding-topを追加しても良い */
    /* padding-top: 20px; */ 
}

/* --- 【重要】レイアウトの強制横並びと幅の比率 (3:1) --- */
#wrapper {
    display: flex;
    flex-direction: row; 
    gap: 5px;
    background-color: #222;
    padding: 10px;
    box-shadow: none;
    max-width: 100%;
    margin: 0 auto;
    width: 95%; 
    min-width: 300px;
    
    flex-grow: 1; 
    align-items: flex-start;
}

/* ぷよのセルサイズの基準を 40px に拡大 */
#puyo-board {
    --puyo-cell-size: 40px; 
    
    display: grid;
    /* ★ 変更 A: 縦方向を 14 行に拡張 (隠し領域を含める) ★ */
    grid-template-rows: repeat(14, var(--puyo-cell-size)); 
    
    /* 6列 * 40px = 240px */
    grid-template-columns: repeat(6, 40px) !important; 
    
    border: 3px solid #666;
    background-color: #000;
    
    background-image: linear-gradient(to right, #1a1a1a 1px, transparent 1px),
                      linear-gradient(to bottom, #1a1a1a 1px, transparent 1px);
    background-size: var(--puyo-cell-size) var(--puyo-cell-size); 
    background-position: -1px -1px; 
    
    width: 240px !important; 
    /* ★ 変更 A: 盤面全体の高さを絶対値 560px に拡張 (14行 * 40px) ★ */
    height: 560px; 
    
    /* Flexbox設定の成長比率をゼロにし、基準幅を240pxに固定 */
    flex: 0 0 240px; 
    min-width: 240px; 
    margin: 0;
    
    max-width: 100%; 
    max-height: 90vh; 
    position: relative; /* バツ印の親要素とするため */
}

/* --- 隠し領域の視覚化 (13列目と14列目) --- */

/* 13列目と14列目のセルに薄い背景を適用し、内部のぷよも薄くする */
/* grid-row-start: 1, 2, ... となるため、最上段の1列目と2列目（Y=13, Y=12）が対象 */

/* ★ 変更 B: 14列目 (grid-row: 1) と 13列目 (grid-row: 2) に半透明の背景とボーダーを適用 ★ */
/* grid-row: 1 は盤面の一番上（Y=13） */
#puyo-board > div:nth-child(-n+6), /* 14列目 (1-6番目のセル) */
#puyo-board > div:nth-child(n+7):nth-child(-n+12) /* 13列目 (7-12番目のセル) */
{
    opacity: 0.5;
    background-color: rgba(50, 50, 50, 0.5); 
    border-bottom: 1px solid rgba(255, 0, 0, 0.5); /* 境界線を目立たせる */
}

/* --- 赤いバツ印の設置 (ゲームオーバーライン) --- */

/* ★ 変更 C: 12列目 (grid-row: 3, Y=11) の中央（3列目, X=2）にバツ印を設置 ★ */
/* セル番号: (6 * (14 - 12)) + 3 = 15 */
#puyo-board > div:nth-child(15) {
    position: relative;
    opacity: 1 !important; /* バツ印のセルは不透明に戻す */
    background-color: transparent !important;
}

#puyo-board > div:nth-child(15):after {
    content: 'X'; /* バツ印の文字 */
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    font-size: 2.5em; /* サイズ調整 */
    color: red;
    font-weight: bold;
    opacity: 0.8;
    pointer-events: none; /* クリックをセルに通すため */
    z-index: 10;
}


/* --- ぷよのセルサイズ (盤面内) --- */
.puyo {
    border-radius: 50%;
    box-shadow: inset 0 -3px 0 rgba(0,0,0,0.3), 0 1px 1px rgba(0,0,0,0.2); 
    display: block; 
    box-sizing: border-box;
    transition: transform 0.1s ease-out;
}
#puyo-board > div {
    display: flex; 
    justify-content: center;
    align-items: center;
}
#puyo-board > div > .puyo {
    width: 90%; 
    height: 90%;
}


/* --- 情報パネルのレイアウト調整 (右側1/4を占める) --- */
/* (その他のスタイルは省略、前回のCSSを使用してください) */
#info-panel {
    /* ... (中略) ... */
}
/* ... (中略) ... */
